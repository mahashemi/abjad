<!DOCTYPE html>
<html dir="rtl" lang="ar">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Golden Quranic Surah Books</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap");
      html {
        background-color: #1d0707;
      }
      body {
        font-family: "Scheherazade New", "Amiri", "Traditional Arabic", serif;
        padding: 40px;
        color: #333;
      }

      h1 {
        font-size: 42px;
        font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande",
          "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
        text-align: center;
        color: #8f723f;
        background: linear-gradient(to bottom, #29261e24, #8376576b, #29261e24);
        margin-bottom: 40px;
        text-shadow: 1px 1px 2px rgb(15, 15, 15);
      }

      #header-before,
      #header-after {
        width: 80%;
        height: 1px;
        background: linear-gradient(
          to right,
          transparent,
          #b4891c,
          transparent
        );
        margin: 5px auto;
      }

      .surah-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        max-width: 1200px;
        margin: 0 auto;
      }

      .surah-book {
        position: relative;
        width: 150px;
        height: 180px;
        background: linear-gradient(
          135deg,
          #a27c2a 0%,
          #c4a03e 50%,
          #b99438 75%,
          #c5a03f 100%
        );
        border-radius: 4px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
          0 4px 6px -2px rgba(0, 0, 0, 0.1),
          inset 0 0 15px rgba(255, 255, 255, 0.3),
          inset 0 0 5px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
      }

      .surah-book::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.8) 50%,
          rgba(255, 255, 255, 0) 100%
        );
      }

      .surah-book::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #9f7928 0%,
          #d8b44a 50%,
          #9f7928 100%
        );
      }

      .surah-book:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3),
          0 10px 10px -5px rgba(0, 0, 0, 0.1),
          inset 0 0 15px rgba(255, 255, 255, 0.5),
          inset 0 0 5px rgba(0, 0, 0, 0.2);
      }

      .surah-name {
        color: #553a10;
        text-align: center;
        padding: 4px;
        font-weight: bold;
        font-size: 28px;
        text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.5);
        letter-spacing: 1px;
        position: relative;
        z-index: 2;
        font-family: "Traditional Arabic", "Arial", sans-serif;
      }

      .surah-name::before {
        content: "";
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        z-index: -1;
        border: 1px solid rgba(183, 149, 11, 0.3);
        box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.2);
      }

      .surah-number {
        position: absolute;
        top: 8px;
        left: 8px;
        background-color: rgb(180, 136, 31);
        color: #fff;
        border-radius: 5%;
        width: fit-content;
        padding: 0 8px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        outline: 1px solid #b08b32;
      }

      .verse-count {
        position: absolute;
        bottom: 8px;
        right: 8px;
        font-family: "Traditional Arabic", "Arial", sans-serif;
        font-size: 18px;
        color: #553a10;
        text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.5);
        font-weight: bold;
      }

      .loading {
        text-align: center;
        font-size: 20px;
        color: #8a6d3b;
        margin: 50px 0;
      }

      .error {
        background-color: #f8d7da;
        color: #721c24;
        padding: 15px;
        border-radius: 5px;
        margin: 20px auto;
        max-width: 800px;
        text-align: center;
      }

      /* Removed verse-count class as we're using verse-count positioning for verse count */

      @media (max-width: 768px) {
        .surah-book {
          width: calc(50% - 20px);
          min-width: 120px;
          /* height: 220px; */
        }

        .surah-name {
          font-size: 32px;
        }

        .verse-count {
          font-size: 16px;
        }

        .surah-number {
          font-size: 16px;
        }
      }
    </style>
  </head>
  <body>
    <h1>
      <div id="header-before"></div>
      <div>The Holy Quran Surahs</div>
      <div id="header-after"></div>
    </h1>
    <div class="surah-container" id="surah-container">
      <div class="loading">Loading Surahs...</div>
    </div>

    <script>
      const USER = "mahashemi"; // ← your GitHub user/org
      const REPO = "abjad"; // ← your repo name
      const FOLDER = "output/quran"; // ← path under repo root

      fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/${FOLDER}`)
        .then((r) => (r.ok ? r.json() : Promise.reject(r.statusText)))
        .then((files) => {
          const container = document.getElementById("surah-container");
          container.innerHTML = "";

          const htmlFiles = files
            .filter((f) => f.name.toLowerCase().endsWith(".html"))
            .map((f) => {
              const match = f.name.match(/سورة\s(\d+)/); // e.g., سورة 103
              const surahNum = match ? parseInt(match[1], 10) : 0;
              return { ...f, surahNum };
            })
            .sort((a, b) => a.surahNum - b.surahNum); // sort by surah number

          htmlFiles
            .filter((f) => f.name.toLowerCase().endsWith(".html"))
            .forEach((f) => {
              // Extract Arabic surah name from the filename
              // Example: سورة النبأ - سورة 78 - عدد آياتها 40.html
              const nameMatch = f.name.match(/سورة\s([^-]+)/);
              const arabicName = nameMatch ? nameMatch[1].trim() : "";

              // Extract verse count if available
              const verseMatch = f.name.match(/عدد آياتها\s(\d+)/);
              const verseCount = verseMatch
                ? parseInt(verseMatch[1], 10)
                : null;

              // Format surah number as 3-digit string with leading zeros
              const paddedSurahNumber = f.surahNum.toString().padStart(3, "0");
              // Create book element
              const bookLink = document.createElement("a");
              bookLink.className = "surah-book";
              bookLink.href = `https://${USER}.github.io/${REPO}/${FOLDER}/${encodeURIComponent(
                f.name
              )}`;
              bookLink.target = "_blank";
              bookLink.rel = "noopener noreferrer";

              // Create surah number badge
              const numberBadge = document.createElement("span");
              numberBadge.className = "surah-number";
              numberBadge.textContent = `سورة ${f.surahNum} `;

              // Create Arabic name element as the main central element
              const nameDiv = document.createElement("div");
              nameDiv.className = "surah-name";
              nameDiv.textContent = arabicName;

              // Add verse count if available (bottom right)
              if (verseCount) {
                const verseCountSpan = document.createElement("span");
                verseCountSpan.className = "verse-count"; // Using the verse-count class for positioning
                verseCountSpan.textContent = ` عدد آياتها ${verseCount}`;
                bookLink.appendChild(verseCountSpan);
              }

              // Assemble book element
              bookLink.appendChild(numberBadge);
              bookLink.appendChild(nameDiv);

              container.appendChild(bookLink);
            });
          // If no files found
          if (htmlFiles.length === 0) {
            container.innerHTML =
              '<div class="error">No surah files found.</div>';
          }
        })
        .catch((err) => {
          document.getElementById(
            "surah-container"
          ).innerHTML = `<div class="error">Error loading surahs: ${err}</div>`;
        });
    </script>
  </body>
</html>
